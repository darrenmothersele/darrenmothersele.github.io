<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
        <channel>
                <title>Darren Mothersele - Hardware Hacking</title>
                <description>Posts categorized as 'hardware hacking'</description>
                <link>http://www.darrenmothersele.com</link>
                <atom:link href="http://www.darrenmothersele.com/hardware/rss.xml" rel="self" type="application/rss+xml" />
                
                        <item>
                                <title>Full RAW EEG data from the MindFlex headset hack</title>
                                <description>&lt;p&gt;There have been many hacks posted online over the past few
years that show how to build a simple EEG machine using the
Mattel MindFlex headset.&lt;/p&gt;

&lt;p&gt;It&amp;#39;s simple to interface this with the Arduino to read the
basic single signal EEG data the toy produces. The toy actually
only uses one of the measures (attention) but it outputs
various useful bits of information.&lt;/p&gt;

&lt;!--break--&gt;

&lt;p&gt;All of this is detailed in the original &lt;a href=&quot;http://frontiernerds.com/brain-hack&quot;&gt;Frontier Nerds&lt;/a&gt; blog post and on our &lt;a href=&quot;/blog/2013/09/21/brain-wave-visualisation/&quot;&gt;Brain Wave Visualisation&lt;/a&gt; project page.&lt;/p&gt;

&lt;p&gt;The original hacks are all based around the preprocessed data that the TGAM1
board in the MindFlex toy produces. I have successfully modified one of these headsets to get full raw EEG data from it. I&amp;#39;m in the process of writing a
library and updating the project page with full details, but in the meantime here&amp;#39;s how it works.&lt;/p&gt;

&lt;h2&gt;Full raw EEG values&lt;/h2&gt;

&lt;p&gt;The TGAM1 board that is inside the MindFlex can run in three modes. One of these is 9600 bits per second normal mode which is how the MindFlex is configured by default. This outputs a packet of data approximately every second that includes signal strength, attention level, meditation level, and pre-calculated values for 8 EEG power bands.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Friendly Warning and Disclaimer:&lt;/strong&gt;
Hack your toys at your own risk. I&amp;#39;m not responsible for any damage you do
to yourself or your belongings. This information is provided here for
information and education only. If you use the original hack and just use the
data available in normal mode then the MindFlex still works as a game as
originally intended. If you enable RAW EEG output then you break the toy!&lt;/p&gt;

&lt;p&gt;To enable RAW EEG you need to remove a 10K resistor from the TGAM1 board, and solder an extra connection to the board, as shown in this image:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/project/mindflex-hack.png&quot; alt=&quot;Connection on the TGAM1&quot;&gt;&lt;/p&gt;

&lt;p&gt;Remove the 10K resistor that appears where the red X is on the photo. You should double check with a multi-meter that you&amp;#39;re removing the correct part. It is connected to the B1 port. This B1 port forms part of the configuration
of the TGAM1 board. In the MindFlex this 10k resistor connects the B1 port
to GND which configures it in normal mode at 9600 bps.&lt;/p&gt;

&lt;p&gt;Solder a connection on to the B1 port, then you can add a new 10K resistor that
connects the B1 port to VCC. This enables raw output mode at 57600 bps.&lt;/p&gt;

&lt;p&gt;You connect to the Arduino in the same way, but you can&amp;#39;t use the Arduino
Brain Library with this configuration. I&amp;#39;m working on an update for this.&lt;/p&gt;

&lt;p&gt;The TGAM1 chip still sends the summary data packets that you get in normal mode
once per second, but now you will also get a packet containing the raw EEG reading 512 times per second, approximately once every 2ms.&lt;/p&gt;
</description>
                                <pubDate>Mon, 07 Oct 2013 00:00:00 +0200</pubDate>
                                <link>http://www.darrenmothersele.com//blog/2013/10/07/mindflex-raw-eeg-data/</link>
                                <guid isPermaLink="true">http://www.darrenmothersele.com//blog/2013/10/07/mindflex-raw-eeg-data/</guid>
                        </item>
                
                        <item>
                                <title>Hackathon at the Horniman Museum and Gardens</title>
                                <description>&lt;p&gt;Yesterday I attended a
&lt;a href=&quot;http://hornimanhackathon.s3-website-eu-west-1.amazonaws.com/&quot;&gt;
Hackathon at the Horniman Museum and Gardens
&lt;/a&gt;. The goal of the day was to develop a tailored environmental control
system for coral research.&lt;/p&gt;

&lt;!--break--&gt;

&lt;p&gt;The aquarium at the Horniman museum is doing some important work in the
conservation of rare coral. This project was to create an inexpensive system
using off-the-shelf components and a bit of hardware hacking to directly
replicate the environments cues from Suva, Fiji, to trigger coral spawning
here in the UK.&lt;/p&gt;

&lt;p&gt;I went along because to see if I could help out and because it seemed like
and interesting an worthwhile application of &amp;quot;the internet of things&amp;quot;.
The environmental control system is to be controlled via live feeds from
Fiji.&lt;/p&gt;

&lt;p&gt;During the day I helped with implementation of a framework in PHP that could
help generate the various pages of reports and control that the system required.
Of course, it was all running on a rasbpi, so the code had to be minimal, and
other developers had pushed for simple PHP code.&lt;/p&gt;
</description>
                                <pubDate>Sun, 22 Sep 2013 00:00:00 +0200</pubDate>
                                <link>http://www.darrenmothersele.com//blog/2013/09/22/horniman-hackathon/</link>
                                <guid isPermaLink="true">http://www.darrenmothersele.com//blog/2013/09/22/horniman-hackathon/</guid>
                        </item>
                
                        <item>
                                <title>Visualising mind activity with a hacked toy EEG</title>
                                <description>&lt;p&gt;The MindFlex toy includes a headset that reads EEG wave data. There&amp;#39;s
lots of information on hacking this toy to create a simple EEG machine
using the limited data the headset provides by default. In this project
I have extracted the full RAW EEG data using the same toy headset from
the MindFlex game.&lt;/p&gt;

&lt;!--break--&gt;

&lt;p&gt;&lt;strong&gt;Update: &lt;/strong&gt; I&amp;#39;ve posted an update to this blog, where I provide
details of how to extract the &lt;a href=&quot;/blog/2013/10/07/mindflex-raw-eeg-data/&quot;&gt;
full RAW EEG data from the MindFlex headset&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Friendly Warning and Disclaimer:&lt;/strong&gt;
Hack your toys at your own risk. I&amp;#39;m not responsible for any damage you do
to yourself or your belongings. This information is provided here for
information and education only. If you use the original hack and just use the
data available in normal mode then the MindFlex still works as a game as
originally intended. If you enable RAW EEG output then you break the toy!&lt;/p&gt;

&lt;h2&gt;Reading brain waves&lt;/h2&gt;

&lt;p&gt;An obvious place for us to start on this project might have been with the
excellent OpenEEG project, but while being open, it still has substantial
costs and complexity in getting up and running. For this project we looked
for a simpler approach.&lt;/p&gt;

&lt;p&gt;EEG technology has been incorporated into various toys and household items
before. There are various commercial options available based on NeuroSky&amp;#39;s
ThinkGear chip.&lt;/p&gt;

&lt;p&gt;The original &lt;a href=&quot;http://frontiernerds.com/brain-hack&quot;&gt;Frontier Nerds&lt;/a&gt;
blog post from 2010 provides a great starting point, but I&amp;#39;ve made a few
changes along the way, including successfully extracting the RAW EEG values
from the MindFlex toy.&lt;/p&gt;

&lt;h2&gt;Budget EEG with the TGAM1&lt;/h2&gt;

&lt;p&gt;The TGAM1 is the controller board responsible for processing the EEG signals
in all of the products based on the NeuroSky ThinkGear chip. NeuroSky no longer
sell the boards in small quantities (I&amp;#39;ve had confirmation of this from
their business development team that this is due to support resources) and
instead recommend that you buy the BrainWave starter kit. This is probably a
good idea if you want easy access to EEG data, but they are still over 100 GBP
to buy in the UK, and the toys are available for only 40.&lt;/p&gt;

&lt;p&gt;When you open the left compartment on the MindFlex you will see this:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/project/mindflex-inner.jpg&quot; alt=&quot;Inside the MindFlex&quot;&gt;&lt;/p&gt;

&lt;p&gt;The small board located on the top at the bottom right is the TGAM1 board.&lt;/p&gt;

&lt;p&gt;The basic hack needs just two solder points. You solder on to the &lt;strong&gt;T&lt;/strong&gt;
pin to get the data out, and another connection for a common ground between
your arduino circuit and the TGAM1. I have also solder two more connections on,
which I will explain later.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/project/mindflex-hack.png&quot; alt=&quot;Connection on the TGAM1&quot;&gt;&lt;/p&gt;

&lt;h2&gt;Simple EEG reading&lt;/h2&gt;

&lt;p&gt;The basic data that comes out of the MindFlex headset by default actually gives
us quite a lot of information for only &amp;pound;40. In the default configuration
you have soldered on only two connections, one for a common ground and one for
the serial data stream. I connect this to a SoftwareSerial pin on the Arduino
and read in the packets. Here&amp;#39;s what data you get:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Signal strength (0 - 200) where 0 means good signal, and 200 indicates a problem with the connection.&lt;/li&gt;
&lt;li&gt;Attention and Meditation eSense values. These are a proprietary measure that is calculated by the TGAM1 using NeuroSky&amp;#39;s own algorithm. The toys based on this technology use the attention measure.&lt;/li&gt;
&lt;li&gt;EEG power band values: A measure of the various power bands that has been pre-calculated by the chip, this updates once per second.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The &lt;a href=&quot;https://github.com/kitschpatrol/Arduino-Brain-Library/&quot;&gt;Arduino
Brain Library&lt;/a&gt; already includes functionality for working with these
values.&lt;/p&gt;

&lt;h2&gt;TGAM1 Region Change&lt;/h2&gt;

&lt;p&gt;If you bought the EU version and you&amp;#39;re in EU then skip this bit.&lt;/p&gt;

&lt;p&gt;The MindFlex, MindSet, Necomimi, etc all based on the TGAM1 that includes a
notch filter on the EEG wave to remove electrical noise from the data. If you
bought a MindFlex from a different region then you will need to adapt it to
work for you. For example, if you&amp;#39;ve bought a headset from the US it will have
a notch filter at 60Hz. In Europe our &amp;quot;mains hum&amp;quot; is at 50Hz. You can switch
the notch filter to work at the correct frequency with a bit of soldering.&lt;/p&gt;

&lt;h2&gt;Getting full RAW EEG data&lt;/h2&gt;

&lt;p&gt;Now on to getting the full raw EEG data from the MindFlex headset. In addition
to the two connections you soldered on before there are two extra connections
required. This allows you to configure the TGAM1 board that is in the MindFlex
to switch between two modes. The &amp;#39;configure&amp;#39; connection is actually called B1
on the TGAM1 board. In the MindFlex headset B1 is connected to GND via a 10K
resistor. I have marked this resistor with an X on the image.&lt;/p&gt;

&lt;p&gt;You need to remove this 10K resistor from the circuit board, and connect B2 to
VCC via a 10K resistor to enable full raw EEG data output.&lt;/p&gt;

&lt;p&gt;The full EEG data is output at the higher baud rate of 57600. You also get the
same packets as in normal mode.&lt;/p&gt;

&lt;p&gt;You can switch back to normal mode, with just the basic data output at baud
rate of 9600 by connecting B1 back to GND with the 10K resistor instead of the
VCC connection.&lt;/p&gt;

&lt;h2&gt;Signal strength&lt;/h2&gt;

&lt;p&gt;The normal data and raw data modes both give you the summary packet once every second. In this is a measure of signal strength. It should be zero to indicate that the board is getting good measurements. Anything more than 0 indicates poor signal, and 200 is used to indicate a problem.&lt;/p&gt;

&lt;p&gt;When I had the Arduino hooked up to the computer serial port I struggled to get the signal strength to 0. When running off batteries (I have an Arduino Pro mini connected to the headset&amp;#39;s battery pack) I have had no issues with
signal strength.&lt;/p&gt;

&lt;p&gt;The issues were resolved by adding an extra GND connection from the Arduino and connecting to the body of the person being tested. I don&amp;#39;t recommend this
approach and running the headset completely off batteries is recommended.&lt;/p&gt;

&lt;p&gt;This requires no wired connection to the computer, hence the RF link that has been implemented.&lt;/p&gt;

&lt;h2&gt;RF data link&lt;/h2&gt;

&lt;p&gt;I am using a cheap low-power RF transceiver to send the EEG packets to the computer. This makes the headset wireless and solves the signal strength problem that required the extra ground connection.&lt;/p&gt;

&lt;h2&gt;Receiving the data&lt;/h2&gt;

&lt;p&gt;The &lt;a href=&quot;https://github.com/kitschpatrol/Processing-Brain-Grapher&quot;&gt;Processing Brain Grapher&lt;/a&gt; is a good starting point to check everything is working but it only works when the headset is in normal mode and sending
the data via the serial port.&lt;/p&gt;

&lt;p&gt;I am working on a Processing library that will work with the updated headset in full EEG mode, this giving access to the eSense meters, the EEG power band values, and the full EEG raw data. I&amp;#39;ll be expanding this section as I make more progress with the libraries and visualisations.&lt;/p&gt;
</description>
                                <pubDate>Sat, 21 Sep 2013 00:00:00 +0200</pubDate>
                                <link>http://www.darrenmothersele.com//blog/2013/09/21/brain-wave-visualisation/</link>
                                <guid isPermaLink="true">http://www.darrenmothersele.com//blog/2013/09/21/brain-wave-visualisation/</guid>
                        </item>
                
                        <item>
                                <title>Pixel Coat</title>
                                <description>&lt;p&gt;An evolving wearable electronics project that combines lots of super bright RGB LED pixels
with reactive technology using an accelerometer to visualize the wearerâ€™s
movements.&lt;/p&gt;

&lt;!--break--&gt;

&lt;p&gt;The coat made it&amp;#39;s first appearance at Laser Cave in Oct 2013, and has since
been revised and appeared at London Decompression 2013.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/img/project/pixelcoat-lg.jpg&quot; alt=&quot;RGB LED Pixel Coat&quot;&gt;&lt;/p&gt;

&lt;p&gt;A new version is planned for 2014...&lt;/p&gt;
</description>
                                <pubDate>Mon, 09 Sep 2013 00:00:00 +0200</pubDate>
                                <link>http://www.darrenmothersele.com//blog/2013/09/09/pixel-coat/</link>
                                <guid isPermaLink="true">http://www.darrenmothersele.com//blog/2013/09/09/pixel-coat/</guid>
                        </item>
                
        </channel>
</rss>
