<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Restoring a single database from a complete MySQL database dump | Darren Mothersele</title>
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>

<div class="home-logo">
  <a href="/">
<img src="/img/daz-logo.png" alt="Daz Logo" class="home-logo-img">
</a>
</div>

<hgroup class="alignCenter">
  <h1>Restoring a single database from a complete MySQL database dump</h1>
        <h6>Jan 10, 2012 Â· By Darren Mothersele</h6>
  <p class="sc">web-dev</p>
</hgroup>
<p>I had a collection of database dumps from a server that had been created using MySQL's <code>--all-databases</code> option. This contained the databases for several Drupal websites, but I wanted to restore the Drupal database for just one of the sites. After a bit of Googling I came across two simple solutions:</p>
<!--break-->
<p>The first option is to pass the whole SQL dump to MySQL command line, but restrict it's operation using the <code>--one-database</code> option. </p>
<p></p><div class="codeblock"><code>mysql -u root -p --one-database destdbname &lt; alldatabases.sql</code></div>
<p>In the above code substitute destdbname with the database name you want to restore, and alldatabases.sql with the name of your full DB backup.</p>
<p>If you would rather just extract the database dump of the single database from the --all-databases dump file, you can do this with sed using this command:</p>
<p></p><div class="codeblock"><code>sed -n '/^-- Current Database: `dbname`/,/^-- Current Database: `/p' alldatabases.sql &gt; output.sql</code></div>
<p>Where <code>dbname</code> is replaced with the database name of the database to extract, and alldatabases.sql is the name of your dump file. The result will be saved into the file output.sql.</p>



<div class="author-line">

  <figure class="author-image">
    <img src="/img/darren100.jpg" alt="Darren's Photo" class="avatar">
  </figure>

<h4>Darren Mothersele</h4>
<p>Darren is a software developer who builds simple, creative, and independent technology. <a href="/about">Read more &raquo;</a></p>
</div>




<footer>
  <p>Want to support my work? Buy my <a href="/blog/2016/06/16/php-framework-weekend/">PHP Framework</a> book.
  Available in paperback from <a href="http://amzn.to/2bNv560">Amazon</a> or eBook from <a href="https://leanpub.com/phpframework">Leanpub</a>.</p>
  <p>
    <small>
      &copy;2007-2017 <a href="/about">Darren Mothersele</a>.
        <a class="text-white" href="http://creativecommons.org/licenses/by-sa/4.0/">Some rights reserved</a>.
        <a href="/contact">Contact</a>.
        <a href="/blog/">Blog Archive</a>.
    </small>
  </p>
</footer>
</body>
</html>
