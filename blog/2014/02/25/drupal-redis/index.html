<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Drupal, Redis | Darren Mothersele</title>
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>

<div class="home-logo">
  <a href="/">
<img src="/img/daz-logo.png" alt="Daz Logo" class="home-logo-img">
</a>
</div>

<hgroup class="alignCenter">
  <h1>Drupal, Redis</h1>
        <h6>Feb 25, 2014 · By Darren Mothersele</h6>
  <p class="sc">web-dev</p>
</hgroup>
<p>The easiest performance boost for any Drupal site is to install Redis.
This is a key-value store that you can use as a cache to drastically cut
down on the number of database calls Drupal is making. These instructions
are for Ubuntu 12.04.</p>

<!--break-->

<p>###Prerequisites</p>

<p>You need to install compilation tools as we’ll be compiling the most recent
version of Redis from source. TCL is also a requirement.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>sudo apt-get install build-essential
sudo apt-get install tcl8.5
</code></pre>
</div>

<p>###Download and Compile Redis</p>

<p>First download the most recent stable Redis version. At the time of writing
this is 2.8.6. Extract the source code and compile. Do this as root:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>wget http://download.redis.io/releases/redis-2.8.6.tar.gz
cs redis-2.8.6
make
</code></pre>
</div>

<p>After compilation it’s a good idea to run the tests. You’ll fail at this point
if you didn’t install TCL.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>make test
</code></pre>
</div>

<p>Then install Redis on your system, again as root:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>make install
</code></pre>
</div>

<p>There is a script provided that will install the Redis service on Ubuntu.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>sudo ./utils/install_server.sh
</code></pre>
</div>

<p>###Drupal configuration</p>

<p>First download the Predis PHP library for Redis into your sites Libraries folder.
Predis library can be downloaded <a href="https://github.com/nrk/predis">here</a> and should
be installed in <code class="highlighter-rouge">sites/all/libraries/predis</code>.</p>

<p>Download and install the <a href="https://drupal.org/project/redis">Redis Drupal module</a>.</p>

<p>Add the connection details to <code class="highlighter-rouge">settings.php</code> and the configuration required to
allow Drupal’s cache system to use Redis, rather than the database.
Append this to <code class="highlighter-rouge">settings.php</code>…</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$conf['redis_client_interface'] = 'Predis';
$conf['redis_client_host']      = '127.0.0.1';
$conf['lock_inc']               = 'sites/all/modules/contrib/redis/redis.lock.inc';
$conf['cache_backends'][]       = 'sites/all/modules/contrib/redis/redis.autoload.inc';
$conf['cache_default_class']    = 'Redis_Cache';
</code></pre>
</div>

<p>Note that in these settings I have installed the redis module in <code class="highlighter-rouge">sites/all/modules/contrib</code>.</p>

<p>Now enjoy super fast Drupal!</p>



<div class="author-line">

  <figure class="author-image">
    <img src="/img/darren100.jpg" alt="Darren's Photo" class="avatar">
  </figure>

<h4>Darren Mothersele</h4>
<p>Darren is a software developer who builds simple, creative, and independent technology. <a href="/about">Read more &raquo;</a></p>
</div>




<footer>
  <p>Want to support my work? Buy my <a href="/blog/2016/06/16/php-framework-weekend/">PHP Framework</a> book.
  Available in paperback from <a href="http://amzn.to/2bNv560">Amazon</a> or eBook from <a href="https://leanpub.com/phpframework">Leanpub</a>.</p>
  <p>
    <small>
      &copy;2007-2016 <a href="/about">Darren Mothersele</a>.
        <a class="text-white" href="http://creativecommons.org/licenses/by-sa/4.0/">Some rights reserved</a>.
        <a href="/contact">Contact</a>.
        <a href="/blog/">Blog Archive</a>.
    </small>
  </p>
</footer>
</body>
</html>
