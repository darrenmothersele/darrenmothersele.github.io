<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title> Drupal, Redis |  Darren Mothersele</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <link rel="alternate" type="application/rss+xml" title="Darren Mothersele" href="http://www.darrenmothersele.com/rss.xml">
    
    <link rel="stylesheet" href="/css/clean.css">
</head>
<body>

<header>

<div class="top-nav">

<a href="/" class="top-nav-logo"><img src="/img/daz-logo.png" class="logo" alt="Logo" width="100"></a>

<ul class="menu menu-list">
    <li><a href="/about/">About me</a></li>
    <li><a href="/blog/">Blog</a></li>
    <li><a href="/contact/">Contact</a></li>
</ul>
</div>
<br clear="both">

</header>

<div class="page">
<h1 class="post-title">Drupal, Redis</h1>

  <span class="">25 Feb 2014</span>


            <img class="avatar" src="/img/darren100.jpg" alt="Author" width="50">
            <p>Darren Mothersele, London UK</p>



            
              <p class="lead">The easiest performance boost for any Drupal site is to install Redis.
This is a key-value store that you can use as a cache to drastically cut
down on the number of database calls Drupal is making. These instructions
are for Ubuntu 12.04.</p>

              

<h3>Prerequisites</h3>

<p>You need to install compilation tools as we&#39;ll be compiling the most recent
version of Redis from source. TCL is also a requirement.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">sudo apt-get install build-essential
sudo apt-get install tcl8.5
</code></pre></div>
<h3>Download and Compile Redis</h3>

<p>First download the most recent stable Redis version. At the time of writing
this is 2.8.6. Extract the source code and compile. Do this as root:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">wget http://download.redis.io/releases/redis-2.8.6.tar.gz
cs redis-2.8.6
make
</code></pre></div>
<p>After compilation it&#39;s a good idea to run the tests. You&#39;ll fail at this point
if you didn&#39;t install TCL.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">make test
</code></pre></div>
<p>Then install Redis on your system, again as root:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">make install
</code></pre></div>
<p>There is a script provided that will install the Redis service on Ubuntu.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">sudo ./utils/install_server.sh
</code></pre></div>
<h3>Drupal configuration</h3>

<p>First download the Predis PHP library for Redis into your sites Libraries folder.
Predis library can be downloaded <a href="https://github.com/nrk/predis">here</a> and should
be installed in <code>sites/all/libraries/predis</code>.</p>

<p>Download and install the <a href="https://drupal.org/project/redis">Redis Drupal module</a>.</p>

<p>Add the connection details to <code>settings.php</code> and the configuration required to
allow Drupal&#39;s cache system to use Redis, rather than the database.
Append this to <code>settings.php</code>...</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">$conf[&#39;redis_client_interface&#39;] = &#39;Predis&#39;;
$conf[&#39;redis_client_host&#39;]      = &#39;127.0.0.1&#39;;
$conf[&#39;lock_inc&#39;]               = &#39;sites/all/modules/contrib/redis/redis.lock.inc&#39;;
$conf[&#39;cache_backends&#39;][]       = &#39;sites/all/modules/contrib/redis/redis.autoload.inc&#39;;
$conf[&#39;cache_default_class&#39;]    = &#39;Redis_Cache&#39;;
</code></pre></div>
<p>Note that in these settings I have installed the redis module in <code>sites/all/modules/contrib</code>.</p>

<p>Now enjoy super fast Drupal!</p>

            

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'darrenmothersele';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

</div>

<footer>



<div class="footer">

<p>
    <i class="icon">&#128681;</i>
    Brixton, London, UK
    <br>
    <i class="icon">&#9993;</i>
    <script type="text/javascript">
    var data = "&#100;&#97;&#114;&#114;&#101;&#110;&#64;&#100;&#97;&#114;"
    + "&#114;&#101;&#110;&#109;&#111;&#116;&#104;&#101;&#114;&#115;&#101;"
    + "&#108;&#101;&#46;&#99;&#111;&#109;";
    document.write(data);
    </script>
</p>

<div class="my-tinyletter">
<form action="https://tinyletter.com/dazm" method="post">
    <p>
        <label for="tlemail">To get my 'friends and family' newsletter, enter your email address:</label>
    </p>
    <p>
        <input type="text" style="width:140px" name="email" id="tlemail" />
        <input type="hidden" value="1" name="embed"/>
        <input type="submit" value="Subscribe" /><br>
        <a href="https://tinyletter.com" target="_blank" style="font-size:75%;">
            powered by TinyLetter
        </a>
    </p>
</form>
</div>


<ul class="social-icons text-right menu-list hidden-sm">


    <li><a href="https://twitter.com/mothersele"><i class="icon-twitter3"></i> Twitter</a></li>

    <li><a href="https://github.com/darrenmothersele/"><i class="icon-github"></i> GitHub</a></li>

    <li><a href="https://vimeo.com/user437927"><i class="icon-vimeo3"></i> Vimeo</a></li>

    <li><a href="https://uk.linkedin.com/in/dmothersele"><i class="icon-linkedin2"></i> LinkedIn</a></li>


</ul>


<ul class="menu-list">
    <li><a href="/contact/">Contact</a></li>
    <li><a href="/about/">About</a></li>
    <li><a href="/training/">Training</a></li>
    <li><a href="/blog/">Blog</a></li>
</ul>

<p class="sub">
    <small>
        &copy;2007-2015 Darren Mothersele.
        Unless specified otherwise, content is licensed under a
        <a class="text-white" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">Creative
            Commons Attribution-ShareAlike 3.0 Unported License</a>.


        Source code is either released into the public domain, or under
        an MIT / BSD license where possible. If this is not possible
        (due to restrictions of the GPL) then code will be released
        as GPL. See individual project license files for details.
    </small>
</p>
</div>

</footer>

</body>
</html>
